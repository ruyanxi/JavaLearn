# 数据库的设计

----

## 多表关系
### 分类
  1. 一对一
  2. 一对多
  3. 多对多
### 实现
1. 一对一<br/>&emsp;&emsp;实现方式：
   <br/>可以在任意一方添加唯一外键指向另一方的主键
2. 一对多/多对一<br/>&emsp;&emsp;实现方式：
   <br/>在多的一方建立外键，指向一的一方的主键
3. 多对多<br/>&emsp;&emsp;实现方式：
    <br/>多对多关系的实现需要借助第三张中间表。中间表至少包含两个字段，这两个字段作为第三张表的外键，分别指向两张表的主键
## 数据库的设计范式
#### 概念
设计数据库时，需要遵循的一些规范。
>设计关系数据库时，遵从不同的规范要求，设计出合理的关系型数据库，这些不同的规范要求被称为不同的范式，各种范式呈递次规范，越高的范式数据库冗余越小。  
目前关系数据库有六种范式：第一范式（1NF）、第二范式（2NF）、第三范式（3NF）、巴斯-科德范式（BCNF）、第四范式（4NF）、第五范式（5NF，又称完美范式）
### 分类
1. 第一范式（1NF）：<br/>&emsp;&emsp;每一列都是不可分割的原子数据项
2. 第二范式（2NF）：<br/>&emsp;&emsp;在1NF的基础上，非码属性必须完全依赖于候选码（在1NF的基础上消除非主属性对主码的部分函数依赖）
3. 第三范式（3NF）：<br/>&emsp;&emsp;在2NF的基础上，任何非主属性不依赖于其他非主属性（在2NF的基础上消除传递依赖）

#### 第一范式
使每一列都无法再拆分
>缺点：  
1.存在非常严重的数据冗余（重复）  
2.数据添加存在问题：仅添加部分列的新属性时数据不合法  
3.数据删除存在问题：一旦删除一类数据则将会删除大量额外数据
#### 第二范式
----
名词解释：
- 函数依赖：  如果通过A的属性（值/组）可以确定唯一B的属性值，就称B依赖于A
  - 完全函数依赖：如果A是一个属性组，且唯一B属性值的确定需要依赖于A属性组中所有的属性值，就称A被B完全依赖。
  - 部分函数依赖：如果A是一个属性组，且唯一B属性值的确定需要依赖于A属性组中某一些属性值即可，就称A被B部分依赖。
- 传递函数依赖：  如果通过A的属性（值/组）可以确定唯一B的属性值，通过B的属性（值/组）可以确定唯一C的属性值，就称C传递函数依赖于A
- 码：如果在一个表中，一个属性（组/值）被该表的其他所有属性完全依赖，则称这个属性（值/组）为该表的码。
  - 主属性：码属性组中的所有属性
  - 非主属性：除了码属性组以外的所有属性
----
将表拆分，得到新的能够通过主属性（组/值）确定某一个字段值的多个表  
<font color=#0ff00f>解决了数据过度冗余的问题</font>
>缺点：  
1.数据添加存在问题：仅添加部分列的新属性时数据不合法  
2.数据删除存在问题：一旦删除一类数据则将会删除大量额外数据

##### 第三范式
通过再拆表建新表，清除了传递函数依赖
<font color=#0ff00f>解决了第一范式中的全部三个问题</font>

## 数据库的备份和还原（BDA）
方式：  
1. 命令行
```mysql
--备份的语法
mysqldump -u 用户名 -p 密码 数据库名称 > 保存的路径/文件名.sql
--还原的语法
--1.登录数据库
--2.创建数据库
--3.使用数据库
--4.执行文件：source 保存的路径/文件名.sql
```
2. 图形化工具
利用图形化工具将数据库转储为sql文件进行备份，恢复则是通过图形化工具直接执行sql文件。
